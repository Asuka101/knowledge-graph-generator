$\sum_{i=1}^{n-1} 3(n-i)=\frac{3}{2}\left(n^{2}-n\right)$次, 因为每次交换需移动 3 次记录; 在平均情况下, 比较和移动记录的总次数大约为最坏情况下的一半。因此，气泡排序算法的时间复杂度为$O\left(n^{2}\right)$。由于气泡排序通常比直接插入排序和直接选择排序需要移动较多数的记录, 所以它是 3 种简单排序方法中速度最慢的一个。另外, 气泡排序是稳定的。

\section*{10.4 .2 快速排序}

快速排序 (quick sorting) 又称划分排序。顾名思义, 它是目前所有排序方法中速度最快的一种。快速排序是对气泡排序的一种改进方法，在气泡排序中，进行元素(记录) 的比较和交换是在相邻单元中进行的, 记录每次交换只能上移或下移一个相邻位置, 因而总的比较和移动次数较多; 在快速排序中, 记录的比较和交换是从两端向中间进行的, 排序码较大的记录一次就能够交换到前面单元, 排序码较小的记录一次就能够交换到前面单元, 记录每次移动的距离较远, 因而总的比较和移动次数较少。

快速排序的过程可叙述为: 首先从待排序区间(开始时为$\mathrm{A}[0] \sim \mathrm{A}[n-1]$) 中选取一个元素 (为方便起见, 一般选取该区间的第一个元素, 若不是, 则要把它同第 1 个元素交换其值)作为比较的基准元素, 通过从区间两端向中间顺序进行比较和交换, 使前面单元中只保留比基准元素的排序码小的元素, 后面单元中只保留比基准元素的排序码大的元素, 而把每次在前面单元中碰到的大于基准元素排序码的那个元素同每次在后面单元中碰到的小于基准元素排序码的那个元素交换其值, 当所有元素的排序码都比较过一遍后, 把基准元素交换到前后两部分单元的交界处, 这样, 前面单元中所有元素的排序码均小于等于基准元素的排序码, 后面单元中所有元素的排序码均大于等于基准元素的排序码, 基准元素的当前位置就是排序后的最终位置, 然后再对基准元素的前后两个子区间分别进行快速排序, 即重复上述过程, 当一个区间为空或只包含一个元素时, 就结束该区间上的快速排序过程。

在快速排序中, 把待排序区间按照第 1 个元素 (即基准元素) 的排序码分为前后 (或称左右) 两个子区间的操作叫做一次划分。设待排序区间为$\mathrm{A}[s] \sim \mathrm{A}[t]$, 其中$s$为区间下限,$t$为区间上限,$s<t, \mathrm{~A}[s]$为该区间的基准元素, 为了实现一次划分, 首先让$i$从$s+1$开始, 依次向后取值, 并使每一元素$\mathrm{A}[i]$的排序码同$x$的排序码$(x$暂存基准元素$\mathrm{A}[s]$的值) 进行比较, 当碰到$\mathrm{A}[i]$. stn 大于$x$. stn 或者$i$大于$j$时止, 再让$j$从$t$开始, 依次向前取值, 并使每一元素$\mathrm{A}[j]$的排序码同$x$的排序码进行比较, 当碰到$\mathrm{A}[j]$. stn 小于$x$. stn 或者$j$小于$i$时止, 若$i$小于$j$则交换$\mathrm{A}[i]$与$\mathrm{A}[j]$的值, 再接着让$i$继续向后取值, 让$j$继续向前取值,继续从两边向中间比较, 直到$i$大于$j$为止, 此时$i$等于$j$加 1 , 而$\mathrm{A}[s] \sim \mathrm{A}[j]$元素的排序码必然小于等于基准元素$\mathrm{A}[s]$的排序码,$\mathrm{A}[j+1] \sim \mathrm{A}[t]$元素的排序码必然大于等于基准元素$\mathrm{A}[s]$的排序码, 把$\mathrm{A}[s]$同$\mathrm{A}[j]$交换其值后, 就完成了一次划分, 得到了前后两个子区间, 分别为$\mathrm{A}[s] \sim \mathrm{A}[j-1]$和$\mathrm{A}[j+1] \sim \mathrm{A}[t]$, 其中前一区间的元素的排序码均小于等于基准元素的排序码, 后一区间的元素的排序码均大于等于基准元素的排序码。

例如, 设待排序的区间为$\mathrm{A}[0] \sim \mathrm{A}[9], 10$个元素的排序码序列为:$(45,53,18,36,72,30,48,93,15,36)$
